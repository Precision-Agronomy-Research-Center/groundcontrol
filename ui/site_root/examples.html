<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>ODM Example | GroundControl</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
  body { margin:0; background:#0f0f0f; color:#f2f2f2; font-family:system-ui,-apple-system,sans-serif; }
  header { padding:24px 28px 10px; }
  h1 { margin:0 0 6px; font-weight:650; font-size:22px; }
  p { margin:0; opacity:.7; font-size:13px; }

  .section { padding:14px 0 26px; }
  .carousel { display:flex; gap:10px; overflow-x:auto; padding:12px 28px; scroll-snap-type:x mandatory; }
  .carousel img { height:140px; border-radius:10px; flex-shrink:0; scroll-snap-align:start; background:#222; }

  .wrap { padding: 0 28px; }
  .card { background:#151515; border-radius:14px; padding:14px; }
  .caption { margin-top:10px; text-align:center; font-size:12px; opacity:.65; }

  model-viewer { width:100%; height:560px; background:#111; border-radius:12px; }
  .ortho { width:100%; max-width:1400px; display:block; margin:0 auto; border-radius:12px; background:#222; }
</style>
</head>

<body>

<header>
  <h1>ODM Example</h1>
  <p>Input images → 3D reconstruction → orthophoto output</p>
</header>

<section class="section">
  <div class="carousel" id="imageCarousel" aria-label="Input images"></div>
</section>

<section class="section">
  <div class="wrap">
    <div class="card">
      <model-viewer
        src="/examples/mygla/latest/model/odm_textured_model_geo.glb"
        camera-controls
        auto-rotate
        rotation-per-second="10deg"
        shadow-intensity="0.6"
        exposure="1"
        alt="ODM 3D textured model">
      </model-viewer>
      <div class="caption">Interactive 3D model (rotate, zoom, pan)</div>
    </div>
  </div>
</section>

<section class="section">
  <div class="wrap">
    <img class="ortho"
      src="/examples/mygla/latest/orthophoto_preview.jpg"
      alt="ODM orthophoto output">
    <div class="caption">Orthophoto preview</div>
  </div>
</section>

<script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>

<script>
fetch("/examples/mygla/source/manifest.json")
  .then(r => r.json())
  .then(m => {
    const c = document.getElementById("imageCarousel");
    (m.images || []).forEach(src => {
      const img = document.createElement("img");
      img.src = src;
      img.loading = "lazy";
      c.appendChild(img);
    });
  })
  .catch(err => console.error("manifest load failed", err));
</script>

</body>
</html>
